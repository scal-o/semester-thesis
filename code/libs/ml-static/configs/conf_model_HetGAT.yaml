# Configuration for HetGAT model type

architecture:
  # List of encoders for different edge types
  encoders:
    - type: "virtual"
      input_channels: 26
      layers: 
        - type: "VirtualDependentAttentionLayer"
          hidden_channels: 26
          num_heads: 2
        - type: "VirtualDependentAttentionLayer"
          hidden_channels: 26 
          num_heads: 2

    - type: "real"
      input_channels: 26
      layers: 
        - type: "RealDependentAttentionLayer"
          hidden_channels: 26
          num_heads: 2
        - type: "RealDependentAttentionLayer"
          hidden_channels: 26
          num_heads: 2

  # Edge predictor configuration
  predictor:
    output_channels: 1
    node_feature_dim: 26
    edge_feature_dim: 2
    layers:
      - hidden_channels: 26

# The 'transforms' section defines how the data should be prepared for this model.
transforms:
    pre:
        # Pre-transforms: basic graph structure
        - builder: "nodes_add_demand"
        - builder: "nodes_add_coords"

        - builder: "virtual_edges_add_index"

        - builder: "real_edges_add_index"
        - builder: "real_edges_stack_capacity_free_flow"
        - builder: "real_edges_add_vcr"
        - builder: "real_edges_add_flow"
    
    post:
        # Post-transforms: feature assembly with scaling
        - scaler:
            type: ["nodes"]
            feature: "demand"
            transform: "minmax"
            factor: 100
        - builder: "nodes_concat_demand_coords_scaled"
        - builder: "nodes_clean_coords"
        - builder: "nodes_clean_demand"
        - builder: "clean_raw_data"
